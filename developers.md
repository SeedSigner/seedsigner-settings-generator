# Developers
To make deeper changes to the SettingsQR Generator, you'll want to pull the repo with the `--recursive` option so that it includes the core SeedSigner repo as well:
```
git clone --recursive https://github.com/kdmukai/seedsigner-settings-generator.git
```

<details>
    <summary>Note: If you don't include `--recursive`...</summary>
    You'll need to make two follow-up calls:

    ```
    git submodule init
    git submodule update --remote
    ```
</details>

You should now have a complete copy of the SeedSigner repo in your `src/` subdir.


## Local dev environment
We rely on a python script that uses a Jinja2 template to generate the static `index.html`. So you'll need to set up a new python3 `virtualenv` and install the Jinja2 dependencies:
```
pip install -r requirements.txt
```


## Updating changes from `SettingsDefinition` in the SeedSigner repo
The static html looks for [`docs/settings_definition.json`](docs/settings_definition.json) which describes all information needed about each possible setting. No individual settings are hard-coded in this repo!

This definition file is directly generated by the `seedsigner/models/settings_definition.py` file that is part of the main SeedSigner repo. So any time a change is made in `SettingsDefinition` in SeedSigner, you'll need to regenerate the `settings_definition.json` in order for the SettingsQR Generator to pick up the change.


## Targeting the SeedSigner submodule to your own repo or branch
If you need to update the SettingsQR Generator with settings changes in your SeedSigner branch, you'll need to make sure that `.gitmodules` in this project's root dir is pointing to the right repo and target branch. Just change the `url` and `branch` as needed:
```
[submodule "src/seedsigner"]
	path = src/seedsigner
	url = https://github.com/kdmukai/seedsigner.git
	branch = settings_definition
```

Once your changes are made, you need to tell `git` to pull the new repo or branch:
```
git submodule update --remote
```

And then any time there are further changes in the `SettingsDefinition` in your target repo and branch, you'll need to repeat the above `update` call to pull in those changes.


## Generate updated `index.html`
With your target `SettingsDefinition` and your virtualenv set up, you can now just run:
```
./generate.sh
```

The script tells `SettingsDefinition` to extract itself to json and then calls the `src/parse_settings_json.py` python script to read the settings in and generate the final static `index.html` that gets written to the `docs/` dir.

*Note: why are the static web files in the `docs/` subdir (a better place would be something like a `www/` subdir). A limitation in Github Pages only lets us host the static website from either the repo root or from a hard-coded `docs/` subdir.*


